from app import app
from models import School
from database import db

# قائمة المدارس المطلوب إضافتها
schools_to_add = [
    "بيرين الثانوية المختلطة",
    "بيرين الاساسية المختلطة",
    "بلاط الشهداء الأساسية للبنين",
    "أم العظام الثانوية المختلطة",
    "حمراء الأسد الأساسية للبنات",
    "العالوك الثانوية المختلطة",
    "الكمشة الثانوية المختلطة",
    "الكمشة الاساسية المختلطة",
    "صروت الثانوية المختلطة",
    "ابو خشيبةالاساسية المختلطة",
    "الخلة الاساسية المختلطة",
    "الناصريه الثانوية المختلطة",
    "رجم الشوف الاساسية المختلطة",
    "الميدان الاساسية المختلطة",
    "ام المكمان الشمالي الاساسية المختلطة",
    "ام رمانه الثانوية المختلطة",
    "المسرة الشرقية الاساسية المختلطة",
    "حوض الصوان الاساسية المختلطة",
    "ام البيار الاساسية المختلطة",
    "مقام عيسى الاساسية المختلطة",
    "الرياض الاساسية المختلطة",
    "العويلية الاساسية المختلطة",
    "الظليل الثانوية المختلطة",
    "ربا الظليل الاساسية المختلطة",
    "ذات الصواري الأساسية للبنات",
    "نازك الملائكة الاساسية المختلطة",
    "ابو ايوب الانصاري الأساسية الاولى للبنين",
    "المشيدة الأساسية الثانية للبنات",
    "ماريا القبطية الثانوية المختلطة",
    "ريحانة بنت زيد الثانوية المختلطة",
    "البَرَكةالاساسية المختلطة",
    "حي الامير عبدالله بن الحسين الثانوية المختلطة",
    "حي أبو هويدي الاساسية المختلطة",
    "الشخوت الاساسيةالمختلطة",
    "حي عرنوس الاساسية المختلطة",
    "هند بنت عتبة الثانوية الاولى المختلطة",
    "هند بنت عتبة الأساسية الثانية للبنات",
    "ذو النورين الاساسية للبنين",
    "سمرقند الأساسية المختلطة",
    "القنية الثانوية الثانية للبنات",
    "القنية الاساسية المختلطة",
    "طواحين العدوان الأساسية المختلطة",
    "دوقرة الثانوية الاولى للبنات",
    "دوقرة الأساسية الثانية للبنات",
    "ابو الزيغان الثانوية الاولى المختلطة",
    "ابو الزيغان الاساسية الثانية المختلطة",
    "الرحيل الاساسية الاولى للبنات",
    "الرحيل الاساسية الثانية المختلطة",
    "حي الصالحية الأساسية الأولى المختلطة",
    "الهاشمية الثانوية المختلطة",
    "امينة الغفارية الاساسية الاولى المختلطة",
    "امينة الغفارية الاساسية الثانية المختلطة",
    "الملكة رانيا العبدالله الاساسية المختلطة",
    "بلال بن رباح الأساسية الأولى للبنين",
    "بلال بن رباح الاساسية الثانية للبنين",
    "ام شريك الانصارية الثانوية المختلطة",
    "اسكان الهاشمية الاساسية المختلطة",
    "ام الصليح الثانوية المختلطة",
    "ام الصليح الأساسية المختلطة",
    "غريسا الاساسيه المختلطة",
    "الفيحاء الثانوية المختلطة",
    "حي الطيار الاساسية المختلطة",
    "حي السائح الاساسيه المختلطه",
    "زيد بن حارثة الأساسية المختلطة",
    "قصر الحلابات الغربي الثانوية المختلطة",
    "نهر الأردن الأساسية للبنين",
    "الدهيثم الاساسيه المختلطه",
    "المزارع الاساسية المختلطة",
    "قصر الحلابات الشرقي الثانوية المختلطة",
    "قصر الحلابات الشرقي الاساسية المختلطة",
    "السبعاوية الاساسية المختلطة",
    "الشهيد موفق السلطي الاساسية المختلطة",
    "الازرق الجنوبي الثانوية المختلطة",
    "اسكان التطوير الحضري الثانوية المختلطة",
    "اليرموك الاساسية المختلطة",
    "الازرق الثانوية المختلطة",
    "حي الأمير حمزة الأساسية المختلطة",
    "العين البيضاء الأساسية المختلطة"
]

def add_schools():
    with app.app_context():
        # إضافة كل مدرسة إلى قاعدة البيانات
        added_count = 0
        updated_count = 0
        skipped_count = 0
        
        for school_name in schools_to_add:
            # تحديد جنس المدرسة بناءً على الاسم
            if "للبنات" in school_name:
                gender = "إناث"
            elif "للبنين" in school_name:
                gender = "ذكور"
            else:
                gender = "مختلطة"
            
            # التحقق من عدم وجود المدرسة مسبقًا
            existing_school = School.query.filter_by(name=school_name).first()
                
            if not existing_school:
                school = School(name=school_name, gender=gender)
                db.session.add(school)
                added_count += 1
                print(f"تمت إضافة مدرسة: {school_name} ({gender})")
            else:
                # تحديث جنس المدرسة إذا كانت موجودة بالفعل
                if existing_school.gender != gender:
                    existing_school.gender = gender
                    updated_count += 1
                    print(f"تم تحديث جنس المدرسة: {school_name} إلى {gender}")
                else:
                    skipped_count += 1
                    print(f"المدرسة موجودة بالفعل: {school_name}")
        
        # حفظ التغييرات
        db.session.commit()
        print(f"\nتم الانتهاء من إضافة المدارس:")
        print(f"- تمت إضافة: {added_count} مدرسة جديدة")
        print(f"- تم تحديث: {updated_count} مدرسة موجودة")
        print(f"- تم تخطي: {skipped_count} مدرسة (لا تحتاج إلى تحديث)")

if __name__ == "__main__":
    add_schools()